
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for Booqable 3rd Party Apps"
        >
    <title>Documentation for Booqable 3rd Party Apps</title>


    <link rel="stylesheet" href="https://use.typekit.net/slm5iks.css">
    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #5e5d83;
  font-style: italic;
}
.highlight .cm {
  color: #5e5d83;
  font-style: italic;
}
.highlight .c1 {
  color: #5e5d83;
  font-style: italic;
}
.highlight .cp {
  color: #465457;
  font-weight: bold;
}
.highlight .cs {
  color: #465457;
  font-weight: bold;
  font-style: italic;
}
.highlight .err {
  color: #f8f8f2;
  background-color: #403d3d;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .ge {
  color: #1b1d1e;
  font-style: italic;
}
.highlight .gr {
  color: #f92672;
}
.highlight .gt {
  color: #f92672;
}
.highlight .gh {
  color: #403d3d;
}
.highlight .go {
  color: #403d3d;
}
.highlight .gp {
  color: #66d9ef;
}
.highlight .gs {
  font-weight: bold;
}
.highlight .gu {
  color: #465457;
}
.highlight .k, .highlight .kv {
  color: #66d9ef;
  font-weight: bold;
}
.highlight .kc {
  color: #66d9ef;
  font-weight: bold;
}
.highlight .kd {
  color: #66d9ef;
  font-weight: bold;
}
.highlight .kp {
  color: #66d9ef;
  font-weight: bold;
}
.highlight .kr {
  color: #66d9ef;
  font-weight: bold;
}
.highlight .kt {
  color: #66d9ef;
  font-weight: bold;
}
.highlight .kn {
  color: #f92672;
  font-weight: bold;
}
.highlight .ow {
  color: #f92672;
  font-weight: bold;
}
.highlight .o {
  color: #f92672;
  font-weight: bold;
}
.highlight .mf {
  color: #af87ff;
}
.highlight .mh {
  color: #af87ff;
}
.highlight .il {
  color: #af87ff;
}
.highlight .mi {
  color: #af87ff;
}
.highlight .mo {
  color: #af87ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #af87ff;
}
.highlight .se {
  color: #af87ff;
}
.highlight .sb {
  color: #d7d787;
}
.highlight .sc {
  color: #d7d787;
}
.highlight .sd {
  color: #d7d787;
}
.highlight .s2 {
  color: #d7d787;
}
.highlight .sh {
  color: #d7d787;
}
.highlight .si {
  color: #d7d787;
}
.highlight .sx {
  color: #d7d787;
}
.highlight .sr {
  color: #d7d787;
}
.highlight .s1 {
  color: #d7d787;
}
.highlight .ss {
  color: #d7d787;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #d7d787;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
  font-weight: bold;
}
.highlight .nd {
  color: #a6e22e;
  font-weight: bold;
}
.highlight .ne {
  color: #a6e22e;
  font-weight: bold;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
  font-weight: bold;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .bp {
  color: #f8f8f2;
}
.highlight .nb {
  color: #f8f8f2;
}
.highlight .ni {
  color: #f8f8f2;
}
.highlight .nn {
  color: #f8f8f2;
}
.highlight .vc {
  color: #f8f8f2;
}
.highlight .vg {
  color: #f8f8f2;
}
.highlight .vi {
  color: #f8f8f2;
}
.highlight .nv, .highlight .vm {
  color: #f8f8f2;
}
.highlight .w {
  color: #f8f8f2;
}
.highlight .nl {
  color: #f8f8f2;
  font-weight: bold;
}
.highlight .nt {
  color: #f92672;
}
.highlight {
  color: #f8f8f2;
  background-color: #1b1d1e;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-609b4343.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-7f861aa6.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>

    <script>
      window.segmentToken = 'pGUa14c0hec2Rbphdguq8NRrJXCjA8t0';
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
      analytics.load(segmentToken);
      }}();
    </script>
  </head>

  <body class="apps" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logov2-63472870.png" class="logo" alt="" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction" title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#quick-start" class="toc-h1 toc-link" data-title="Quick Start" title="Quick Start">Quick Start</a>
          </li>
          <li>
            <a href="#how-apps-work" class="toc-h1 toc-link" data-title="How Apps Work" title="How Apps Work">How Apps Work</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#how-apps-work-configuration" class="toc-h2 toc-link" data-title="Configuration" title="Configuration">Configuration</a>
                  </li>
                  <li>
                    <a href="#how-apps-work-app-store" class="toc-h2 toc-link" data-title="App Store" title="App Store">App Store</a>
                  </li>
                  <li>
                    <a href="#how-apps-work-iframe-page" class="toc-h2 toc-link" data-title="Iframe Page" title="Iframe Page">Iframe Page</a>
                  </li>
                  <li>
                    <a href="#how-apps-work-user-framework" class="toc-h2 toc-link" data-title="User Framework" title="User Framework">User Framework</a>
                  </li>
                  <li>
                    <a href="#how-apps-work-webhooks" class="toc-h2 toc-link" data-title="Webhooks" title="Webhooks">Webhooks</a>
                  </li>
                  <li>
                    <a href="#how-apps-work-oauth-authentication" class="toc-h2 toc-link" data-title="OAuth Authentication" title="OAuth Authentication">OAuth Authentication</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#capabilities" class="toc-h1 toc-link" data-title="Capabilities" title="Capabilities">Capabilities</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#capabilities-tracking-scripts" class="toc-h2 toc-link" data-title="Tracking Scripts" title="Tracking Scripts">Tracking Scripts</a>
                  </li>
                  <li>
                    <a href="#capabilities-theme-blocks" class="toc-h2 toc-link" data-title="Theme Blocks" title="Theme Blocks">Theme Blocks</a>
                  </li>
                  <li>
                    <a href="#capabilities-delivery-carriers" class="toc-h2 toc-link" data-title="Delivery Carriers" title="Delivery Carriers">Delivery Carriers</a>
                  </li>
                  <li>
                    <a href="#capabilities-payment-options" class="toc-h2 toc-link" data-title="Payment Options" title="Payment Options">Payment Options</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#reference" class="toc-h1 toc-link" data-title="Reference" title="Reference">Reference</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#reference-config-meta-json" class="toc-h2 toc-link" data-title="/config/meta.json" title="/config/meta.json"><code>/config/meta.json</code></a>
                  </li>
                  <li>
                    <a href="#reference-supportdata" class="toc-h2 toc-link" data-title="SupportData" title="SupportData"><code>SupportData</code></a>
                  </li>
                  <li>
                    <a href="#reference-baseurl" class="toc-h2 toc-link" data-title="BaseURL" title="BaseURL"><code>BaseURL</code></a>
                  </li>
                  <li>
                    <a href="#reference-oauthsettings" class="toc-h2 toc-link" data-title="OAuthSettings" title="OAuthSettings"><code>OAuthSettings</code></a>
                  </li>
                  <li>
                    <a href="#reference-routes" class="toc-h2 toc-link" data-title="Routes" title="Routes"><code>Routes</code></a>
                  </li>
                  <li>
                    <a href="#reference-uiextensions" class="toc-h2 toc-link" data-title="UIExtensions" title="UIExtensions"><code>UIExtensions</code></a>
                  </li>
                  <li>
                    <a href="#reference-framesettings" class="toc-h2 toc-link" data-title="FrameSettings" title="FrameSettings"><code>FrameSettings</code></a>
                  </li>
                  <li>
                    <a href="#reference-trackingscriptsettings" class="toc-h2 toc-link" data-title="TrackingScriptSettings" title="TrackingScriptSettings"><code>TrackingScriptSettings</code></a>
                  </li>
                  <li>
                    <a href="#reference-themesettings" class="toc-h2 toc-link" data-title="ThemeSettings" title="ThemeSettings"><code>ThemeSettings</code></a>
                  </li>
                  <li>
                    <a href="#reference-themeblocksettings" class="toc-h2 toc-link" data-title="ThemeBlockSettings" title="ThemeBlockSettings"><code>ThemeBlockSettings</code></a>
                  </li>
                  <li>
                    <a href="#reference-globalsetting" class="toc-h2 toc-link" data-title="GlobalSetting" title="GlobalSetting"><code>GlobalSetting</code></a>
                  </li>
                  <li>
                    <a href="#reference-themeblocksetting" class="toc-h2 toc-link" data-title="ThemeBlockSetting" title="ThemeBlockSetting"><code>ThemeBlockSetting</code></a>
                  </li>
                  <li>
                    <a href="#reference-selectoption" class="toc-h2 toc-link" data-title="SelectOption" title="SelectOption"><code>SelectOption</code></a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Booqable Apps are modular extensions that enhance the Booqable platform by adding new features or integrating with external services. They&#39;re distributed through the Booqable App Store, where users can discover, install, and manage them through a streamlined interface. Apps can extend functionality through various capabilities including delivery carriers for custom shipping rates, payment options for checkout processing, theme blocks for website customization, and tracking scripts for analytics integration.</p>
<h1 id='quick-start'>Quick Start</h1>
<p>TODO section summary</p>

<ul>
<li>TODO how to create a tracking pixel app</li>
<li>TODO how to create a custom content block app</li>
<li>TODO how to create a delivery carrier app</li>
<li>TODO how to create a payment option app</li>
</ul>
<h1 id='how-apps-work'>How Apps Work</h1>
<p>Booqable Apps are modular extensions that enhance the Booqable platform by adding new features or integrating with external services. They&#39;re distributed through the Booqable App Store, where users can discover and manage them. Configuration is managed through a file tree and allows you to control store listings and app details.</p>
<h2 id='how-apps-work-configuration'>Configuration</h2>
<p>Booqable apps are simply a folder with a few files in it. Some files are configuration files, some are templates, and some are static assets.</p>
<div class="highlight"><pre class="highlight plaintext"><code>app-name/
├── assets/              # Static assets (images, icons, etc.)
├── config/              # Configuration files
│   └── locales/         # Localization files
└── templates/           # HTML or JS templates
</code></pre></div>
<p>There are 4 main folders in a Booqable app:</p>

<ul>
<li><code>assets/</code> — For static assets like images, icons, etc., used in the app&#39;s UI.</li>
<li><code>config/</code> — Configuration files that control various aspects of the app.</li>
<li><code>config/locales/</code> — Files containing localized strings used in the app.</li>
<li><code>templates/</code> — Template files rendered as part of the app&#39;s UI.</li>
</ul>
<h3 id='how-apps-work-configuration-config-meta-json'><code>/config/meta.json</code></h3>
<p>This is the main configuration file for the app. It defines the app&#39;s metadata, capabilities, and plans. It is required for every app and is validated against a JSON schema.</p>

<p>Latest: <a href="schemas/app-0-1-0.json">0.1.0 JSON Schema</a> / <a href="#reference">0.1.0 Reference</a></p>
<h4 id='how-apps-work-configuration-code-config-meta-json-code-capabilities'>Capabilities</h4>
<p>In your app&#39;s <code>meta.json</code> file, you can define the capabilities of your app. These are the main tasks your app can perform inside Booqable, such as:</p>

<ul>
<li><strong>Tracking scripts:</strong> Let users add analytics scripts to their website to track user behavior.</li>
<li><strong>Theme blocks:</strong> Allow users to install new content blocks in their website.</li>
<li><strong>Delivery carriers:</strong> Define new carriers that can be used to ship orders.</li>
<li><strong>Payment options:</strong> Define new payment methods that can be used to pay for orders.</li>
</ul>

<p>For more information see the <a href="apps.html#capabilities">Capabilities section</a>.</p>
<h3 id='how-apps-work-configuration-config-plans-json'><code>/config/plans.json</code></h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"free"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"track_pages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"track_events"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"pro"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">700</span><span class="p">,</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"track_pages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"track_events"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="nl">"advanced_analytics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"stripe_id_month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"price_8QZkaLXY12pgrsMvWJfnbcTR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stripe_id_year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"price_7PLqwmAB98xjskQvLybUiKzR5"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This file defines the pricing plans your app offers. Each plan specifies pricing, features, and billing configuration that users see during installation.</p>
<h4 id='how-apps-work-configuration-code-config-plans-json-code-plan-configuration'>Plan Configuration</h4>
<ul>
<li><strong><code>price_in_cents</code></strong> - Plan price in cents (e.g., 700 = $7.00). Required for all plans.</li>
<li><strong><code>features</code></strong> - Object defining which app capabilities are enabled for this plan.</li>
<li><strong><code>stripe_id_month</code></strong> - Stripe price ID for monthly billing (optional, for paid plans).</li>
<li><strong><code>stripe_id_year</code></strong> - Stripe price ID for yearly billing (optional, for paid plans).</li>
<li><strong><code>paid_during_beta</code></strong> - If Booqable should charge users for the plan even during the beta program (optional).</li>
</ul>
<h4 id='how-apps-work-configuration-code-config-plans-json-code-features'>Features</h4>
<p>Each feature in the <code>features</code> object can be enabled/disabled per plan. The <code>default</code> feature is typically enabled for all plans and represents basic app functionality. Additional features can be specific to your app&#39;s capabilities.</p>
<h4 id='how-apps-work-configuration-code-config-plans-json-code-plan-display'>Plan Display</h4>
<p>The plan titles, descriptions, and feature lists shown to users are configured in your <a href="#how-apps-work-configuration-locale-files">locale files</a> under the <code>plans</code> key, not in this JSON file. This file only controls the technical configuration and pricing.</p>
<h3 id='how-apps-work-configuration-locale-files'>Locale files</h3>
<p>Locale files contain the localized strings used throughout the Booqable UI such as the app title and descriptions as well forms for user settings and post-installation guides.</p>

<p>They must be in YAML format and are stored in the <code>locales</code> folder. The file name must be the locale language code, such as <code>en.yaml</code> or <code>pt-BR.yaml</code>. The top-level of the file should contain only a single key which matches the locale&#39;s code, so <code>en</code> or <code>pt_BR</code>.</p>
<h4 id='how-apps-work-configuration-locale-files-app-metadata'>App metadata</h4><div class="highlight"><pre class="highlight yaml tab-yaml"><code><span class="na">en</span><span class="pi">:</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Gizmo</span><span class="nv"> </span><span class="s">App"</span>
  <span class="na">description</span><span class="pi">:</span>
    <span class="na">short</span><span class="pi">:</span> <span class="s2">"</span><span class="s">A</span><span class="nv"> </span><span class="s">simple</span><span class="nv"> </span><span class="s">app</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">manage</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">gizmos."</span>
    <span class="na">long</span><span class="pi">:</span> <span class="s2">"</span><span class="s">This</span><span class="nv"> </span><span class="s">app</span><span class="nv"> </span><span class="s">allows</span><span class="nv"> </span><span class="s">you</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">manage</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">gizmos.</span><span class="nv"> </span><span class="s">You</span><span class="nv"> </span><span class="s">can</span><span class="nv"> </span><span class="s">add,</span><span class="nv"> </span><span class="s">edit,</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">delete</span><span class="nv"> </span><span class="s">gizmos.</span><span class="nv"> </span><span class="s">Delight</span><span class="nv"> </span><span class="s">your</span><span class="nv"> </span><span class="s">customers</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">new</span><span class="nv"> </span><span class="s">gizmos</span><span class="nv"> </span><span class="s">every</span><span class="nv"> </span><span class="s">month!"</span>
</code></pre></div>
<p>The app&#39;s title and descriptions are configurable through the locale files. The short description is mainly used in the app store listings page, while the long description is used in the app store detail page.</p>
<h4 id='how-apps-work-configuration-locale-files-app-plans'>App Plans</h4><div class="highlight"><pre class="highlight yaml tab-yaml"><code><span class="na">en</span><span class="pi">:</span>
  <span class="na">plans</span><span class="pi">:</span>
    <span class="na">free</span><span class="pi">:</span>
      <span class="na">title</span><span class="pi">:</span> <span class="s">Gizmo Free</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">A free plan to get you started with the Gizmo App.</span>
      <span class="na">features</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">10 gizmos</span>
      <span class="pi">-</span> <span class="s">100 notifications per month</span>
      <span class="pi">-</span> <span class="s">100 API requests per month</span>
    <span class="na">pro</span><span class="pi">:</span>
      <span class="na">title</span><span class="pi">:</span> <span class="s">Gizmo Pro</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">10x the fun with the Gizmo Pro plan.</span>
      <span class="na">features</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">100 gizmos</span>
      <span class="pi">-</span> <span class="s">1000 notifications per month</span>
      <span class="pi">-</span> <span class="s">1000 API requests per month</span>
</code></pre></div>
<p>The title, description and features of each plan are configurable through the locale files. These are shown to users in the app&#39;s store detail page and as part of the <a href="#how-apps-work-app-store">installation flow</a>. Each plan must have a unique key under the <code>&lt;locale&gt;.plans</code> key, such as <code>free</code>, <code>basic</code>, <code>pro</code>, etc. When a plan is no longer available, you should still keep the translation keys for existing customers.</p>
<h4 id='how-apps-work-configuration-locale-files-forms'>Forms</h4><div class="highlight"><pre class="highlight yaml tab-yaml"><code><span class="na">en</span><span class="pi">:</span>
  <span class="na">form</span><span class="pi">:</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s">Configure your Weglot widget</span>
    <span class="na">description</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">To get started, enter your Weglot API key below. If you don't have an API key</span>
        <span class="s">yet, you can get one by creating an account on the Weglot website.</span>
    <span class="na">api_key</span><span class="pi">:</span>
      <span class="na">label</span><span class="pi">:</span> <span class="s">Api Key</span>
    <span class="na">dropdown_direction</span><span class="pi">:</span>
      <span class="na">label</span><span class="pi">:</span> <span class="s">Dropdown Direction</span>
</code></pre></div>
<p>Apps can define <a href="#how-apps-work-user-settings">global settings</a> that Booqable renders as a form where users can provide information to the app. The forms are shown to users after installation or when they visit the app&#39;s settings page. You can provide localized strings for the form&#39;s title, description and fields.</p>

<p>If you&#39;re <a href="#capabilities-theme-blocks">using theme blocks</a> and those blocks have their own settings, you can also define localized labels for them here.</p>
<h4 id='how-apps-work-configuration-locale-files-guides'>Guides</h4>
<p>You can configure your app to show a post-installation guide to users. This is a good way to help users get started with your app or ask for additional information required to operate the app, such as API keys.</p>
<div class="highlight"><pre class="highlight yaml tab-yaml"><code><span class="na">en</span><span class="pi">:</span>
  <span class="na">unconfigured</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">To get started, you need to configure your Weglot widget.</span>
      <span class="s">You can do this by entering your Weglot API key below.</span>
      <span class="s">If you don't have an API key yet, you can get one by creating an account on the Weglot website.</span>
    <span class="na">link</span><span class="pi">:</span>
      <span class="na">text</span><span class="pi">:</span> <span class="s">Weglot dashboard</span>
      <span class="na">url</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://dashboard.weglot.com/register?fp_ref=booqable'</span>
</code></pre></div>
<p>If you require some global settings to be present you show a simple instruction box using the <code>unconfigured.description</code> and <code>unconfigured.link</code> keys.</p>

<figure>
  <img src="images/apps/unconfigured-app-instruction-box-c83c076c.png" alt="Example of an instruction box shown to users when the app is not yet configured" style="max-width: 100%;">
  <figcaption>
    Example of the instruction box shown to users when required global settings are missing.
  </figcaption>
</figure>
<div class="highlight"><pre class="highlight yaml tab-yaml"><code><span class="na">en</span><span class="pi">:</span>
  <span class="na">unconfigured</span><span class="pi">:</span>
    <span class="na">guide</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">1. Create a Weglot account</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Go to the Weglot website and sign up for a new account.</span>
        <span class="na">asset</span><span class="pi">:</span> <span class="s">step_1.png</span>
      <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">2. Select Booqable as your website technology</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">In the setup process, choose "Booqable" when asked for your website technology.</span>
        <span class="na">asset</span><span class="pi">:</span> <span class="s">step_2.png</span>
      <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">3. Set the original language and add translated languages</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Set "English" as your original language and add any additional languages you want to offer to your visitors.</span>
        <span class="na">asset</span><span class="pi">:</span> <span class="s">step_3.png</span>
      <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">4. Add your website details and connect Weglot</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">In the "Add your website details" section, click on "Connect Weglot to your website without it."</span>
        <span class="na">asset</span><span class="pi">:</span> <span class="s">step_4.png</span>
      <span class="pi">-</span> <span class="na">title</span><span class="pi">:</span> <span class="s">5. Copy the API key from the Weglot snippet</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Copy the API key provided in the Weglot snippet. You will need this to configure the app in Booqable.</span>
        <span class="na">asset</span><span class="pi">:</span> <span class="s">step_5.png</span>
</code></pre></div>
<p>Additionaly, you can define a step by step guide for users to follow after installation. This is a good way to instruct users on how to get required API keys from third-party services, for example. The guide must be specified under the <code>unconfigured.guide</code> key and consists of a list of steps, each with a title, description and an image.</p>

<figure>
  <img src="images/apps/unconfigured-app-guide-64f4fbc5.png" alt="Example of a step by step guide" style="max-width: 100%;">
  <figcaption>
    Example of a step by step guide.
  </figcaption>
</figure>
<h4 id='how-apps-work-configuration-locale-files-summary'>Summary</h4>
<p>There are several keys that are required or have special meaning in the locale file for Booqable apps. The following is a condensed list of the most important keys:</p>

<ul>
<li><p><code>title</code>:
Required. The app&#39;s title.</p></li>
<li><p><code>description.short</code>:
Required. A short description of the app for the app listings page.</p></li>
<li><p><code>description.long</code>:
Required. A longer description of the app for the detail page.</p></li>
<li><p><code>plans</code>:
Localized strings for app plans.</p></li>
<li><p><code>form.title</code>:
The title of the app&#39;s global settings form.</p></li>
<li><p><code>form.description</code>:
The description of the global settings form.</p></li>
<li><p><code>unconfigured.description</code>:
A string shown in an instruction box when required global settings are missing.</p></li>
<li><p><code>unconfigured.link.text</code>:
The text for a link shown in the instruction box.</p></li>
<li><p><code>unconfigured.link.url</code>:
The URL for the link in the instruction box.</p></li>
<li><p><code>unconfigured.guide</code>:
A list of steps (each with <code>title</code>, <code>description</code>, and <code>asset</code>) to guide users through configuration or setup.</p></li>
</ul>
<h2 id='how-apps-work-app-store'>App Store</h2>
<p>The Booqable App Store is the first place where users will meet your app. App authors can provide an app title, description and images to control how the app is displayed in the store.</p>

<figure>
  <img src="images/apps/app-store-listings-3abd998a.png" alt="App store listings" style="max-width: 100%;">
  <figcaption>
    How apps are displayed in the app store listings page.
  </figcaption>
</figure>

<p>If a user clicks on your app listing, they will be taken to the app store detail page.</p>

<figure>
  <img src="images/apps/app-store-detail-page-ce1035f3.png" alt="Example of an app detail page in the Booqable App Store" style="max-width: 100%;">
  <figcaption>
    Example of how your app might look in the app store detail page.
  </figcaption>
</figure>

<p>And when users choose to install your app, they are guided through the installation process.</p>

<figure>
  <img src="images/apps/app-install-step-1-652e0d1c.png" alt="Step 1: Choose app plan" style="max-width: 100%;">
  <figcaption>
    <strong>Step 1:</strong> The user chooses the app plan they want to install.
  </figcaption>
</figure>

<figure>
  <img src="images/apps/app-install-step-2-a29ef06f.png" alt="Step 2: Review and confirm" style="max-width: 100%;">
  <figcaption>
    <strong>Step 2:</strong> The user reviews the app plan and confirms the installation.
  </figcaption>
</figure>

<p>The full list of customizable app store elements is:</p>

<ul>
<li><strong>Title:</strong> The title of your app and it is displayed in several spots throughout the app store and the Booqable UI. Configured in <a href="#how-apps-work-configuration-locale-files">locale files</a>.</li>
<li><strong>Author:</strong> A byline for the app. It&#39;s displayed mainly in the app store. Configured in <a href="#reference-config-meta-json"><code>meta.json</code></a>.</li>
<li><strong>Banner:</strong> A banner image to make your app stand out in the app store listings. Configured in <a href="#reference-config-meta-json"><code>meta.json</code></a>.</li>
<li><strong>Icon:</strong> A small icon to represent your app in the app store and few other places in the Booqable UI. Configured in <a href="#reference-config-meta-json"><code>meta.json</code></a>.</li>
<li><strong>Short description:</strong> A short summary of your app, mainly for users to quickly understand what the app does when browsing the app store. Configured in <a href="#how-apps-work-configuration-locale-files">locale files</a>.</li>
<li><strong>Long description:</strong> Your app&#39;s description is displayed in the app store detail page, after users clicked through from the app store listings. Configured in <a href="#how-apps-work-configuration-locale-files">locale files</a>.</li>
</ul>

<p>Additionally, each app plan has its own set of customizable elements:</p>

<ul>
<li><strong>Title:</strong> The title of the plan. Configured in <a href="#how-apps-work-configuration-locale-files">locale files</a>.</li>
<li><strong>Description:</strong> The description of the plan. Configured in <a href="#how-apps-work-configuration-locale-files">locale files</a>.</li>
<li><strong>Features:</strong> A list of the plan&#39;s key features. Configured in <a href="#how-apps-work-configuration-locale-files">locale files</a>.</li>
</ul>

<p>Some apps show an additional step immediately after installation to request permissions from the user. This step appears only for apps that are configured to use OAuth, and it prompts the user to grant the app access to Booqable&#39;s API. If your app requires OAuth, users will see a permissions screen after confirming installation where they can review and approve the requested scopes.</p>

<figure>
  <img src="images/apps/app-permissions-screen-21b31fdd.png" alt="Example of the app permissions screen in Booqable" style="max-width: 100%;">
  <figcaption>
    Example of the permissions screen shown to users when an app requests access to Booqable's API.
  </figcaption>
</figure>

<p>For more information on configuring OAuth and permission requests, see the <a href="#how-apps-work-oauth-authentication">OAuth documentation</a>.</p>
<h2 id='how-apps-work-iframe-page'>Iframe Page</h2>
<p>App iframe pages allow developers to create custom interfaces that are embedded directly within the Booqable UI. This provides a seamless user experience where app functionality feels like a native part of the Booqable platform, while allowing developers to build rich, interactive interfaces using their own technology stack.</p>

<p>Iframe pages are particularly useful for apps that need:</p>

<ul>
<li>Custom control surfaces and dashboards</li>
<li>Complex configuration interfaces with custom validation</li>
<li>Interactive setup wizards and onboarding flows</li>
<li>Custom data visualization and monitoring</li>
</ul>
<h3 id='how-apps-work-iframe-page-how-iframe-pages-work'>How iframe pages work</h3>
<p>When an app is configured to use an iframe page, Booqable embeds the app&#39;s interface within an iframe element in the admin dashboard. The iframe loads content from the app&#39;s specified URL, which can be either:</p>

<ul>
<li>A relative path that gets prefixed with the app&#39;s base URL</li>
<li>An absolute URL pointing to the app&#39;s interface</li>
</ul>

<p>The iframe is automatically sized to fit the content and provides a secure communication channel between the app and Booqable through the postMessage API. This allows apps to create dedicated pages within the Booqable dashboard for their specific functionality.</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"base_url"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://my-app.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"ui_extension"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"frames"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"app_config"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/admin/apps/my-app/config"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ui_extension"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"frames"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"app_config"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://external-service.com/booqable/config"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Iframe pages are configured in your app&#39;s <code>meta.json</code> file using the <a href="#reference-framesettings"><code>ui_extension.frames</code> property</a>. When a frame is accessed, Booqable automatically appends authentication and context parameters to the URL, including the JWT token and locale information.</p>
<h3 id='how-apps-work-iframe-page-authentication-token'>Authentication token</h3>
<p>The iframe URL includes a JWT token as a query parameter that provides authentication and context information. This token contains:</p>

<ul>
<li><strong>Company ID</strong> - The ID of the company using the app.</li>
<li><strong>Company Slug</strong> - The unique identifier for the company.</li>
<li><strong>User Email</strong> - The email of the current employee.</li>
<li><strong>Currency Settings</strong> - The company&#39;s currency configuration.</li>
<li><strong>Distance Unit</strong> - The company&#39;s preferred distance unit for deliveries.</li>
</ul>

<p>The token is automatically generated by Booqable and passed to the iframe URL. Apps should validate this token to ensure requests are coming from legitimate Booqable instances.</p>
<h3 id='how-apps-work-iframe-page-message-protocol'>Message protocol</h3>
<p>The iframe and Booqable communicate through a standardized postMessage protocol. All messages follow this structure:</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="nl">eventName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">MESSAGE_TYPE</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// Message-specific data</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h4 id='how-apps-work-iframe-page-message-protocol-messages-from-iframe-to-booqable'>Messages from iframe to Booqable</h4>
<p><strong>SET_IFRAME_HEIGHT</strong>
Adjusts the iframe height to fit the content.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
  <span class="na">eventName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SET_IFRAME_HEIGHT</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">height</span><span class="p">:</span> <span class="mi">600</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div>
<p><strong>SET_FLASH_MESSAGE</strong>
Displays a success or error message to the user.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
  <span class="na">eventName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SET_FLASH_MESSAGE</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// or "error"</span>
    <span class="na">action</span><span class="p">:</span> <span class="dl">"</span><span class="s2">saved</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// or "created", "updated", "deleted"</span>
    <span class="na">resource</span><span class="p">:</span> <span class="dl">"</span><span class="s2">settings</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">actioned</span><span class="p">:</span> <span class="dl">"</span><span class="s2">configuration</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div>
<p><strong>REFRESH_SUBSCRIPTION</strong>
Requests Booqable to refresh the app subscription data.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
  <span class="na">eventName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">REFRESH_SUBSCRIPTION</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">},</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div>
<p><strong>GET_AVATAR</strong>
Requests user avatar information for display in the iframe.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
  <span class="na">eventName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET_AVATAR</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">user_id</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">User Name</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div>
<p><strong>NAVIGATE</strong>
Requests Booqable to navigate to a different page.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
  <span class="na">eventName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">NAVIGATE</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/app-store/my-app/settings</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">)</span>
</code></pre></div><h4 id='how-apps-work-iframe-page-message-protocol-messages-from-booqable-to-iframe'>Messages from Booqable to iframe</h4>
<p><strong>SET_AVATAR</strong>
Provides avatar information in response to a GET_AVATAR request.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// Sent by Booqable to the iframe</span>
<span class="p">{</span>
  <span class="nl">eventName</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SET_AVATAR</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">payload</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">avatar</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">user_id</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">color</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#FF5733</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">initials</span><span class="p">:</span> <span class="dl">"</span><span class="s2">UN</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">initialsColor</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#FFFFFF</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id='how-apps-work-iframe-page-implementation-example'>Implementation example</h3>
<p>To the right is an example of a configuration interface.</p>
<div class="highlight"><pre class="highlight html tab-html"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>App Configuration<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;h1&gt;</span>Configure Your App<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"settings-form"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"api_key"</span><span class="nt">&gt;</span>API Key<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">id=</span><span class="s">"api_key"</span> <span class="na">name=</span><span class="s">"api_key"</span> <span class="na">required</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"api_key_error"</span> <span class="na">style=</span><span class="s">"display: none; color: red;"</span><span class="nt">&gt;&lt;/div&gt;</span>

    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Save Configuration<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>

  <span class="nt">&lt;script&gt;</span>
    <span class="c1">// Security: Validate message origin</span>
    <span class="kd">const</span> <span class="nx">ALLOWED_ORIGINS</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">booqable.com</span><span class="dl">'</span><span class="p">];</span>

    <span class="kd">function</span> <span class="nx">isValidOrigin</span><span class="p">(</span><span class="nx">origin</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">hostname</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">origin</span><span class="p">).</span><span class="nx">hostname</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">ALLOWED_ORIGINS</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="nx">allowed</span> <span class="o">=&gt;</span> <span class="nx">hostname</span><span class="p">.</span><span class="nx">endsWith</span><span class="p">(</span><span class="nx">allowed</span><span class="p">));</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">showError</span><span class="p">(</span><span class="nx">fieldId</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">fieldId</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">_error</span><span class="dl">'</span><span class="p">).</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">message</span><span class="p">;</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">fieldId</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">_error</span><span class="dl">'</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">block</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">adjustHeight</span><span class="p">()</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
        <span class="na">eventName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SET_IFRAME_HEIGHT</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">payload</span><span class="p">:</span> <span class="p">{</span> <span class="na">height</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollHeight</span> <span class="p">}</span>
      <span class="p">},</span> <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Listen for messages from Booqable</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isValidOrigin</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">origin</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="dl">'</span><span class="s1">Unauthorized origin:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">origin</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">eventName</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">SET_AVATAR</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Received avatar:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">avatar</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="c1">// Handle form submission</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">settings-form</span><span class="dl">'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">submit</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

      <span class="kd">const</span> <span class="nx">apiKey</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">api_key</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">apiKey</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">showError</span><span class="p">(</span><span class="dl">'</span><span class="s1">api_key</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">API key is required</span><span class="dl">'</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">// Save configuration (replace with actual API call)</span>
      <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// Notify Booqable of success</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
          <span class="na">eventName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SET_FLASH_MESSAGE</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">payload</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">action</span><span class="p">:</span> <span class="dl">'</span><span class="s1">saved</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">resource</span><span class="p">:</span> <span class="dl">'</span><span class="s1">settings</span><span class="dl">'</span><span class="p">,</span>
            <span class="na">actioned</span><span class="p">:</span> <span class="dl">'</span><span class="s1">configuration</span><span class="dl">'</span>
          <span class="p">}</span>
        <span class="p">},</span> <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">);</span>

        <span class="nb">window</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span>
          <span class="na">eventName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">REFRESH_SUBSCRIPTION</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">payload</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span> <span class="dl">'</span><span class="s1">*</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="c1">// Adjust height on load</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">load</span><span class="dl">'</span><span class="p">,</span> <span class="nx">adjustHeight</span><span class="p">);</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div><h2 id='how-apps-work-user-framework'>User Framework</h2>
<p>The Booqable User Framework is a collection of Javascript APIs that app developers can use inside templates. It provides a standardized way to interact with the Booqable platform, handle events, manage scripts, and integrate with third-party services.</p>

<p>The framework is available globally as the <code>Booqable</code> object and provides several categories of functionality.</p>
<h3 id='how-apps-work-user-framework-app-registration'>App registration</h3>
<p><strong><code>Booqable.registerApp(category, appConfig)</code></strong></p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">Booqable</span><span class="p">.</span><span class="nx">registerApp</span><span class="p">(</span><span class="dl">'</span><span class="s1">marketing</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Your App Name</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Description of your app</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">domain</span><span class="p">:</span> <span class="dl">"</span><span class="s2">your-domain.com</span><span class="dl">"</span><span class="p">,</span>

  <span class="na">init</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Called when the page loads</span>
  <span class="p">},</span>

  <span class="na">onConsent</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Called when user grants consent</span>
  <span class="p">},</span>

  <span class="na">onDeny</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Called when user denies consent</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div>
<p>Allows you to register your app with Booqable&#39;s cookie consent manager.</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>category</code> - What is roughly the purpose of the app.</li>
<li><code>appConfig</code> - Configuration object with app details and callbacks.</li>
</ul>

<p><strong>Available categories:</strong></p>

<ul>
<li><code>marketing</code> - Marketing and analytics apps.</li>
<li><code>essential</code> - Core functionality apps.</li>
</ul>
<h3 id='how-apps-work-user-framework-event-system'>Event system</h3>
<p><strong><code>Booqable.on(event, callback, context)</code></strong></p>

<p>Listen to Booqable events to track user interactions and page changes.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// Track page views</span>
<span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">page-change</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User navigated to a new page</span><span class="dl">'</span><span class="p">)</span>
<span class="p">})</span>

<span class="c1">// Track product views</span>
<span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">viewProduct</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User viewed product:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
<span class="p">})</span>

<span class="c1">// Track cart interactions</span>
<span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">addToCart</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User added item to cart:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div>
<p><strong><code>Booqable.off(event, callback)</code></strong></p>

<p>Remove an event listener.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">myCallback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">viewProduct</span><span class="dl">'</span><span class="p">,</span> <span class="nx">myCallback</span><span class="p">)</span>
<span class="nx">Booqable</span><span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="dl">'</span><span class="s1">viewProduct</span><span class="dl">'</span><span class="p">,</span> <span class="nx">myCallback</span><span class="p">)</span>
</code></pre></div>
<p><strong>Available events:</strong></p>

<ul>
<li><code>page-change</code> - User navigates to a different page.</li>
<li><code>viewProduct</code> - User views a product page.</li>
<li><code>addToCart</code> - User adds an item to cart.</li>
<li><code>removeFromCart</code> - User removes an item from cart.</li>
<li><code>viewCart</code> - User views the cart page.</li>
<li><code>information</code> - User reaches checkout information step.</li>
<li><code>payment</code> - User reaches checkout payment step.</li>
<li><code>completed</code> - User completes a purchase.</li>
</ul>

<p>TODO what&#39;s in the payload for each of these events?</p>
<h3 id='how-apps-work-user-framework-script-management'>Script management</h3>
<p><strong><code>Booqable.loadScript(src)</code></strong></p>

<p>Dynamically load external JavaScript files.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">Booqable</span><span class="p">.</span><span class="nx">loadScript</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://cdn.example.com/script.js</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div>
<p><strong><code>Booqable.unloadScript(src)</code></strong></p>

<p>Remove previously loaded scripts.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">Booqable</span><span class="p">.</span><span class="nx">unloadScript</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://cdn.example.com/script.js</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div>
<p><strong><code>Booqable.jQuery(callback)</code></strong></p>

<p>Load jQuery and execute a callback when ready.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">Booqable</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// jQuery is now available</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.my-element</span><span class="dl">'</span><span class="p">).</span><span class="nx">hide</span><span class="p">()</span>
<span class="p">})</span>
</code></pre></div><h3 id='how-apps-work-user-framework-cart-data'>Cart data</h3>
<p><strong><code>Booqable.cartData</code></strong></p>

<p>Access current cart information.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">Booqable</span><span class="p">.</span><span class="nx">cartData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">cartId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">cart_123</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">currency</span><span class="p">:</span> <span class="dl">"</span><span class="s2">USD</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">grandTotalWithTax</span><span class="p">:</span> <span class="mf">99.99</span><span class="p">,</span>
  <span class="na">tax</span><span class="p">:</span> <span class="mf">8.99</span><span class="p">,</span>
  <span class="na">coupon</span><span class="p">:</span> <span class="dl">"</span><span class="s2">SAVE10</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">items</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">item_id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">prod_123</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">item_name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Product Name</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">quantity</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="na">price</span><span class="p">:</span> <span class="mf">89.99</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div><h3 id='how-apps-work-user-framework-utility-functions'>Utility functions</h3>
<p><strong><code>Booqable._once(func)</code></strong></p>

<p>Ensure a function runs only once.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">setupApp</span> <span class="o">=</span> <span class="nx">Booqable</span><span class="p">.</span><span class="nx">_once</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">App setup completed</span><span class="dl">'</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">setupApp</span><span class="p">()</span> <span class="c1">// Runs</span>
<span class="nx">setupApp</span><span class="p">()</span> <span class="c1">// Ignored</span>
</code></pre></div>
<p><strong><code>Booqable._defer(condition, method, attempt)</code></strong></p>

<p>Execute a method when a condition is met, with retry logic.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">Booqable</span><span class="p">.</span><span class="nx">_defer</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">myLibrary</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">},</span>
  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Library loaded!</span><span class="dl">'</span><span class="p">)</span> <span class="p">}</span>
<span class="p">)</span>
</code></pre></div><h3 id='how-apps-work-user-framework-example-implementation'>Example implementation</h3>
<p>To the right is an example of a app might do when using the user framework to track shopping behavior.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="cm">/* global Booqable */</span>
<span class="nx">Booqable</span><span class="p">.</span><span class="nx">registerApp</span><span class="p">(</span><span class="dl">'</span><span class="s1">marketing</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">My Tracking App</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Track shopping behavior with the MTA custom analytics platform.</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">domain</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mytrackingapp.example.com</span><span class="dl">"</span><span class="p">,</span>

  <span class="na">init</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Initialize when page loads</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">My tracking app initialized</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">},</span>

  <span class="na">onConsent</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Load tracking script when user consents</span>
    <span class="nx">Booqable</span><span class="p">.</span><span class="nx">loadScript</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://cdn.mytrackingapp.example.com/tracker.js</span><span class="dl">'</span><span class="p">)</span>

    <span class="c1">// Track page views</span>
    <span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">page-change</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">trackPageView</span><span class="p">()</span>
    <span class="p">})</span>

    <span class="c1">// Track ecommerce events</span>
    <span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">viewProduct</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">trackProductView</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">completed</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">trackPurchase</span><span class="p">()</span>
    <span class="p">})</span>
  <span class="p">},</span>

  <span class="na">trackPageView</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Custom tracking implementation</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Page view tracked</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">},</span>

  <span class="na">trackProductView</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Product view tracked:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
  <span class="p">},</span>

  <span class="na">trackPurchase</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Purchase tracked:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">Booqable</span><span class="p">.</span><span class="nx">cartData</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div><h2 id='how-apps-work-webhooks'>Webhooks</h2>
<p>Apps can subscribe to webhook events to receive real-time notifications when certain actions occur in Booqable. This allows your app to respond to user actions and maintain synchronization with the platform.</p>

<p>To learn more about how to use webhooks see the <a href="v4.html#webhook-endpoints">Webhook Endpoints documentation</a>.</p>
<h3 id='how-apps-work-webhooks-available-app-events'>Available app events</h3>
<p>There are four webhook events specifically related to app lifecycle:</p>
<h4 id='how-apps-work-webhooks-available-app-events-app-installed'><code>app.installed</code></h4>
<p>Triggered when a user installs your app from the Booqable App Store.</p>
<h4 id='how-apps-work-webhooks-available-app-events-app-configured'><code>app.configured</code></h4>
<p>Triggered when all required app settings have been configured and the app becomes fully functional.</p>
<h4 id='how-apps-work-webhooks-available-app-events-app-plan_changed'><code>app.plan_changed</code></h4>
<p>Triggered when a user upgrades or downgrades their app subscription plan.</p>
<h4 id='how-apps-work-webhooks-available-app-events-app-uninstalled'><code>app.uninstalled</code></h4>
<p>Triggered when a user removes your app from their Booqable account.</p>
<h3 id='how-apps-work-webhooks-webhook-payload-example'>Webhook payload example</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"22799991-8bc7-4823-a4d1-7eb6329d21b2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-08-02T11:12:18.145359+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2025-08-02T11:12:18.145359+00:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mailchimp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2a94184-00f3-424f-bc36-c46a84eb1461"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"plan_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18ad296f-16af-4172-a3de-44bd1218543f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"marketing"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"icon_cropped_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paid"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"free_during_beta"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configured"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mailchimp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"provider_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Booqable"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API key"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UA-12345678-1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings_values"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"config_url"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"support"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"support@booqable.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"website"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://help.booqable.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"oauth_status"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"frames"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"theme_blocks"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>To the right is an example of a payload for the app installation event.</p>

<p>All app webhook events use the same payload structure with only the <code>event</code> field value varying between <code>app.installed</code>, <code>app.configured</code>, <code>app.plan_changed</code>, and <code>app.uninstalled</code>.</p>
<h2 id='how-apps-work-oauth-authentication'>OAuth Authentication</h2>
<p>Booqable apps can use OAuth authentication to securely connect with <a href="v4.html">Booqable&#39;s API</a> on behalf of the user without requiring them to share their credentials directly.</p>
<h3 id='how-apps-work-oauth-authentication-how-oauth-works-in-booqable-apps'>How OAuth works in Booqable apps</h3>
<p>When an app has OAuth authentication enabled, Booqable handles the OAuth flow on behalf of the app. The process works as follows:</p>

<ol>
<li>The user clicks to install the app.</li>
<li>Booqable asks the user to grant the app permissions to use Booqable on user&#39;s behalf.</li>
<li>If the access is granted, Booqable redirects to app&#39;s <code>redirect_url</code> with the authorization code.</li>
<li>The app exchanges the authorization code for an access and refresh tokens and can then make API calls to Booqable&#39;s API.</li>
</ol>
<h3 id='how-apps-work-oauth-authentication-configuring-oauth-in-your-app'>Configuring OAuth in your app</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"oauth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-client-id.apps.service.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-client-secret"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"redirect_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/oauth/callback"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"full_access"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>To enable OAuth authentication for your app, you need to <a href="#reference-oauthsettings">configure the <code>oauth</code> object in your app&#39;s <code>meta.json</code></a> file.</p>

<ul>
<li><strong><code>client_id</code></strong>: An OAuth client ID that identifies your app to Booqable&#39;s API endpoints. Must follow the format <code>{32-random-characters}.public.apps.{app_identifier}</code>.</li>
<li><strong><code>client_secret</code></strong>: An OAuth client secret that Booqable uses to authenticate your app. Must follow the format <code>{64-random-characters}.private.apps.{app_identifier}</code>.</li>
<li><strong><code>redirect_url</code></strong>: The URL path where Booqable will redirect to after authorization. This should be a relative path that will be prefixed with your app&#39;s base URL.</li>
<li><strong><code>scopes</code></strong>: An array of OAuth scopes that your app requires. These define what permissions your app needs from Booqable&#39;s API. Currently the only scope available is <code>full_access</code>.</li>
</ul>
<h3 id='how-apps-work-oauth-authentication-oauth-flow-in-the-user-interface'>OAuth flow in the user interface</h3>
<p>When a user installs an app that has OAuth authentication enabled, they will see an additional step in the installation process:</p>

<ol>
<li><strong>App installation</strong> - User installs the app from the app store.</li>
<li><strong>OAuth authorization</strong> - User is redirected to the app to grant permissions.</li>
<li><strong>Configuration</strong> - User configures any additional app settings.</li>
<li><strong>App ready</strong> - The app is now connected and ready to use.</li>
</ol>
<h1 id='capabilities'>Capabilities</h1>
<p>Apps can extend Booqable&#39;s functionality through various capabilities that integrate with different parts of the platform. These capabilities include delivery carriers for custom shipping rates, payment options for checkout processing, theme blocks for website customization, and tracking scripts for analytics integration. Each capability provides specific APIs and configuration options that allow apps to seamlessly integrate with Booqable&#39;s core features.</p>
<h2 id='capabilities-tracking-scripts'>Tracking Scripts</h2>
<p>Tracking scripts allow your app to inject JavaScript code into the customer-facing websites to track user behavior and integrate with analytics services like Google Analytics, Meta Pixel and others.</p>
<h3 id='capabilities-tracking-scripts-configuration'>Configuration</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ui_extension"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tracking_script"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"templates/index.js.liquid"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>To enable tracking scripts in your app you need to configure the <a href="#reference-trackingscriptsettings"><code>tracking_script</code></a> settings in your <code>meta.json</code> file. The <code>template</code> property specifies the path to your JavaScript template file that will be rendered and injected into the customer&#39;s website.</p>

<p><strong>Only JavaScript templates are allowed for tracking scripts.</strong> Your template must be a <a href="https://shopify.github.io/liquid/">Liquid</a> file that contains only valid JavaScript code after rendering.</p>
<h3 id='capabilities-tracking-scripts-global-settings-integration'>Global settings integration</h3><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// meta.json</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="c1">// ...</span><span class="w">
  </span><span class="nl">"global_settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// Global app settings are available as template variables</span>
<span class="kd">const</span> <span class="nx">apiKey</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">{{ api_key }}</span><span class="dl">'</span>
<span class="k">this</span><span class="p">.</span><span class="nx">initializeTracking</span><span class="p">(</span><span class="nx">apiKey</span><span class="p">)</span>
</code></pre></div>
<p>You can access your app&#39;s global settings in the app templates using Liquid syntax. When rendering templates all global settings defined in your <code>meta.json</code> are available as template variables.</p>
<h3 id='capabilities-tracking-scripts-user-framework'>User framework</h3>
<p>Inside your app&#39;s templates you can write Javascript code that uses the Booqable User Framework to load custom scripts and respond to events like <code>viewProduct</code>, <code>addToCart</code> and more. See the <a href="#how-apps-work-user-framework">User framework documentation</a> for more details.</p>
<h3 id='capabilities-tracking-scripts-consent-management'>Consent management</h3>
<p>If your app installs cookies in the user&#39;s browser (for example, for analytics, marketing, or personalization), you <strong>must</strong> integrate with Booqable&#39;s consent management framework. This is done via the User Framework by using <a href="#how-apps-work-user-framework-app-registration"><code>Booqable.registerApp</code></a>.</p>

<p>When you register your app using <code>registerApp</code>, Booqable will automatically manage when your tracking scripts are allowed to set cookies, based on the user&#39;s consent preferences.</p>
<h3 id='capabilities-tracking-scripts-example-implementation'>Example implementation</h3><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// meta.json</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="c1">// ...</span><span class="w">
  </span><span class="nl">"ui_extension"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tracking_script"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"templates/index.js.liquid"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// templates/index.js.liquid</span>
<span class="nx">Booqable</span><span class="p">.</span><span class="nx">registerApp</span><span class="p">(</span><span class="dl">'</span><span class="s1">marketing</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Google Analytics</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Track user behavior with Google Analytics</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">domain</span><span class="p">:</span> <span class="dl">"</span><span class="s2">googletagmanager.com</span><span class="dl">"</span><span class="p">,</span>

  <span class="na">onConsent</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Update consent settings</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">consent</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">update</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">ad_storage</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">granted</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">analytics_storage</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">granted</span><span class="dl">'</span>
    <span class="p">})</span>

    <span class="c1">// Load Google Analytics</span>
    <span class="nx">Booqable</span><span class="p">.</span><span class="nx">loadScript</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://www.googletagmanager.com/gtag/js?id=</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">{{ api_key }}</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">},</span>

  <span class="na">onDeny</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Update consent settings</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">consent</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">update</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">ad_storage</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">denied</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">analytics_storage</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">denied</span><span class="dl">'</span>
    <span class="p">})</span>

    <span class="c1">// Remove Google Analytics</span>
    <span class="nx">Booqable</span><span class="p">.</span><span class="nx">unloadScript</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://www.googletagmanager.com/gtag/js?id=</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">{{ api_key }}</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">},</span>

  <span class="na">init</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">trackingId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">{{ api_key }}</span><span class="dl">'</span>

    <span class="c1">// Initialize Google Analytics</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[]</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span> <span class="p">}</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">consent</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">default</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">ad_storage</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">denied</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">analytics_storage</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">denied</span><span class="dl">'</span>
    <span class="p">})</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">js</span><span class="dl">'</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">())</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">config</span><span class="dl">'</span><span class="p">,</span> <span class="nx">trackingId</span><span class="p">)</span>

    <span class="c1">// Track ecommerce events</span>
    <span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">viewProduct</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">event</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">view_item</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">currency</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">currency</span><span class="p">,</span>
        <span class="na">value</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">items</span>
      <span class="p">})</span>
    <span class="p">})</span>

    <span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">addToCart</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">event</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">add_to_cart</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">currency</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">currency</span><span class="p">,</span>
        <span class="na">value</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">items</span>
      <span class="p">})</span>
    <span class="p">})</span>

    <span class="nx">Booqable</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">completed</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">event</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">purchase</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">transaction_id</span><span class="p">:</span> <span class="nx">Booqable</span><span class="p">.</span><span class="nx">cartData</span><span class="p">.</span><span class="nx">cartId</span><span class="p">,</span>
        <span class="na">value</span><span class="p">:</span> <span class="nx">Booqable</span><span class="p">.</span><span class="nx">cartData</span><span class="p">.</span><span class="nx">grandTotalWithTax</span><span class="p">,</span>
        <span class="na">currency</span><span class="p">:</span> <span class="nx">Booqable</span><span class="p">.</span><span class="nx">cartData</span><span class="p">.</span><span class="nx">currency</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="nx">Booqable</span><span class="p">.</span><span class="nx">cartData</span><span class="p">.</span><span class="nx">items</span>
      <span class="p">})</span>
    <span class="p">})</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div>
<p>To the right is an example implementation of app that integrates with Google Analytics.</p>

<p>This example is just for demonstration purposes. If you wish to integrate Google Analytics into your Booqable account you can use our Google Analytics app already available in the Booqable App Store.</p>
<h2 id='capabilities-theme-blocks'>Theme Blocks</h2>
<p>Theme blocks allow your app to inject custom HTML content into the customer websites. These blocks can be added to different sections of the website (header, footer, or body sections) and provide a way to extend the website&#39;s functionality with custom widgets, forms, or other integrations.</p>
<h3 id='capabilities-theme-blocks-configuration'>Configuration</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ui_extension"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"themes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"blocks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newsletter Signup"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"templates/newsletter-signup.liquid"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"allowed_sections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"app"</span><span class="p">],</span><span class="w">
          </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Subscribe to our newsletter"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email placeholder"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter your email"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>To enable theme blocks in your app you need to configure the <a href="#reference-themesettings"><code>themes</code></a> settings in your <code>meta.json</code> file. The <code>blocks</code> property specifies an array of theme blocks that can be added to the customer&#39;s website. Each theme block must specify a <a href="https://shopify.github.io/liquid/">Liquid</a> template file that will be rendered as HTML in the customer&#39;s website. You can constrain which sections of the customer&#39;s website the block is meant to be rendered in — header, footer, or body (app) — and optionally specify a set of user-configurable settings that will be available during rendering.</p>
<h3 id='capabilities-theme-blocks-block-configuration'>Block configuration</h3>
<p>Each <a href="#reference-themeblocksettings"><code>theme block</code></a> requires the following configuration:</p>

<ul>
<li><strong><code>name</code></strong> - Display name shown to users in the theme editor.</li>
<li><strong><code>template</code></strong> - Path to the Liquid template file for the block.</li>
<li><strong><code>allowed_sections</code></strong> - Array of sections where the block can be placed: <code>header</code>, <code>footer</code>, or <code>app</code> (body).</li>
</ul>
<h3 id='capabilities-theme-blocks-block-settings'>Block settings</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Default Title"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"_display_settings_"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"header"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Display Settings"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Height"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"400"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"select"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Position"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"left"</span><span class="p">,</span><span class="w"> </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Left"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w"> </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Center"</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w"> </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"right"</span><span class="p">,</span><span class="w"> </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Right"</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Theme blocks can have <a href="#reference-themeblocksetting">configurable settings</a> that users can modify via Booqable&#39;s website builder. See the example on the right.</p>

<p><strong>Available setting types:</strong></p>

<ul>
<li><strong><code>text</code></strong> - Single line text input.</li>
<li><strong><code>number</code></strong> - Numeric input.</li>
<li><strong><code>select</code></strong> - Dropdown with predefined options.</li>
<li><strong><code>header</code></strong> - Section divider in the settings panel.</li>
</ul>

<figure>
  <img src="images/apps/theme-block-settings-example-200b39fc.png" alt="Theme block settings example" style="max-width: 100%; max-height: 400px;">
  <figcaption>
    Example of a theme block settings as viewed in the website builder.
  </figcaption>
</figure>
<h3 id='capabilities-theme-blocks-global-settings-integration'>Global settings integration</h3><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// meta.json</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="c1">// ...</span><span class="w">
  </span><span class="nl">"global_settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight liquid tab-liquid"><code>&lt;!-- templates/widget.liquid --&gt;
&lt;div&gt;
  &lt;script&gt;
    const apiKey = '<span class="p">{{</span><span class="w"> </span><span class="nv">api_key</span><span class="w"> </span><span class="p">}}</span>'
    const domain = '<span class="p">{{</span><span class="w"> </span><span class="nv">domain</span><span class="w"> </span><span class="p">}}</span>'
    // Use global settings in your template
  &lt;/script&gt;
&lt;/div&gt;
</code></pre></div>
<p>You can also access your app&#39;s global settings in the theme block templates using Liquid syntax. When rendering templates all global settings defined in your <code>meta.json</code> are available as template variables.</p>
<h3 id='capabilities-theme-blocks-app-id'>App ID</h3>
<p>Each theme block has access to a unique <code>app_id</code> attribute during rendering. This <code>app_id</code> is guaranteed to be unique for each block instance. It&#39;s often useful to add CSS styles scoped to the block&#39;s element by using the <code>app_id</code> as a selector.</p>
<div class="highlight"><pre class="highlight liquid tab-liquid"><code>&lt;div id="<span class="p">{{</span><span class="w"> </span><span class="nv">app_id</span><span class="w"> </span><span class="p">}}</span>"&gt;
  &lt;style&gt;
    #<span class="p">{{</span><span class="w"> </span><span class="nv">app_id</span><span class="w"> </span><span class="p">}}</span> .widget {
      /* Your styles here */
    }
  &lt;/style&gt;

  &lt;div class="widget"&gt;
    &lt;!-- Your widget content here --&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre></div><h3 id='capabilities-theme-blocks-user-framework'>User framework</h3>
<p>Inside your theme block templates you can write JavaScript code that uses the Booqable User Framework to load custom scripts and respond to events like <code>viewProduct</code>, <code>addToCart</code> and more. See the <a href="#how-apps-work-user-framework">User framework documentation</a> for more details.</p>
<h3 id='capabilities-theme-blocks-consent-management'>Consent management</h3>
<p>If your theme block installs cookies in the user&#39;s browser (for example, for analytics, marketing, or personalization), you <strong>must</strong> integrate with Booqable&#39;s consent management framework. This is done via the User Framework by using <a href="#how-apps-work-user-framework-app-registration"><code>Booqable.registerApp</code></a>.</p>

<p>When you register your app using <code>registerApp</code>, Booqable will automatically manage when your theme blocks are allowed to set cookies, based on the user&#39;s consent preferences.</p>
<h3 id='capabilities-theme-blocks-example-implementation'>Example implementation</h3><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// meta.json</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="c1">// ...</span><span class="w">
  </span><span class="nl">"ui_extension"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"themes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"blocks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newsletter Signup"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"templates/newsletter-signup.liquid"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"allowed_sections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"app"</span><span class="p">],</span><span class="w">
          </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Subscribe to our newsletter"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"button_text"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button text"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Subscribe"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"_desktop_settings_header_"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"header"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Desktop Settings"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"height_desktop"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Height"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"_mobile_settings_header_"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"header"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mobile Settings"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"height_mobile"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Height"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight liquid tab-liquid"><code>&lt;!-- templates/newsletter-signup.liquid --&gt;
&lt;div id="<span class="p">{{</span><span class="w"> </span><span class="nv">app_id</span><span class="w"> </span><span class="p">}}</span>"&gt;
  &lt;style&gt;
    #<span class="p">{{</span><span class="w"> </span><span class="nv">app_id</span><span class="w"> </span><span class="p">}}</span> {
      text-align: left;
      user-select: none;
    }

    #<span class="p">{{</span><span class="w"> </span><span class="nv">app_id</span><span class="w"> </span><span class="p">}}</span> .newsletter-form {
      width: 100%;
      border: 0;
    }

    @media (max-width: 650px) {
      #<span class="p">{{</span><span class="w"> </span><span class="nv">app_id</span><span class="w"> </span><span class="p">}}</span> .newsletter-form {
        height: <span class="p">{{</span><span class="w"> </span><span class="nv">height_mobile</span><span class="w"> </span><span class="p">}}</span>px;
      }
    }
  &lt;/style&gt;

  &lt;script&gt;
    window.addEventListener('load', function() {
      Booqable.registerApp('marketing', {
        name: "Newsletter Signup",
        domain: "newsletter.example.com",
        description: "Collect email addresses for your newsletter. &lt;a href=\"https://example.com/privacy\" target=\"_blank\"&gt;Learn more&lt;/a&gt;",

        onConsent: function() {
          const template = document.querySelector('#<span class="p">{{</span><span class="w"> </span><span class="nv">app_id</span><span class="w"> </span><span class="p">}}</span> template')
          template.insertAdjacentElement('afterend', template.content.cloneNode(true).firstElementChild)
        }
      })
    })
  &lt;/script&gt;

  &lt;template&gt;
    <span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">title</span><span class="w"> </span><span class="p">%}</span>
      &lt;div class="newsletter-widget"&gt;
        &lt;h3&gt;<span class="p">{{</span><span class="w"> </span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>&lt;/h3&gt;
        &lt;iframe
          src="https://newsletter.example.com/form?api_key=<span class="p">{{</span><span class="w"> </span><span class="nv">api_key</span><span class="w"> </span><span class="p">}}</span>"
          height="<span class="p">{{</span><span class="w"> </span><span class="nv">height_desktop</span><span class="w"> </span><span class="p">}}</span>"
          allowtransparency="true"
          class="newsletter-form"&gt;
        &lt;/iframe&gt;
      &lt;/div&gt;
    <span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>
  &lt;/template&gt;
&lt;/div&gt;
</code></pre></div>
<p>The example on the right shows a newsletter signup widget that:</p>

<ul>
<li>Uses global settings for the API key</li>
<li>Has configurable title and button text</li>
<li>Renders HTML content only after consent</li>
<li>Supports responsive design</li>
<li>Scopes CSS styles to the block using <code>app_id</code></li>
</ul>
<h2 id='capabilities-delivery-carriers'>Delivery Carriers</h2>
<p>This capability allows your app to add custom delivery carriers to provide shipping rates for orders.</p>
<h3 id='capabilities-delivery-carriers-configuration'>Configuration</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://example.booqable.com/api/4/app_carriers'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "data": {
      "type": "app_carriers",
      "attributes": {
        "identifier": "my_delivery_service",
        "rates_url": "https://my-app.com/api/v1/rates"
      }
    }
  }'</span>
</code></pre></div>
<p>After a user installs your delivery carrier app, you must create a delivery carrier record using Booqable&#39;s <a href="internal.html#app-carriers">Carriers API endpoint</a>. The carrier requires:</p>

<ul>
<li><code>identifier</code> - A unique identifier for your carrier.</li>
<li><code>rates_url</code> - The URL where Booqable will send rate calculation requests.</li>
</ul>

<p>A good way to accomplish this is to configure OAuth authentication for your app and create the carrier right after the app exchanges the authorization code for an access token.</p>
<h3 id='capabilities-delivery-carriers-how-it-works'>How it works</h3>
<p>Delivery carriers must provide a <code>rates_url</code>. When a user selects a rate in the order screen or during checkout we issue a <code>POST</code> request to this URL with several query parameters that can be used to calculate the shipping rate. They are:</p>

<ul>
<li><code>distance</code> - The distance between the origin and destination in the unit specified by <code>distance_unit</code>.</li>
<li><code>distance_unit</code> - The unit of the distance. One of <code>metric</code> or <code>imperial</code>.</li>
<li><code>order_amount_in_cents</code> - The total order amount in cents.</li>
<li><code>origin_address</code> - The order origin address in the format <code>address_line_1,address_line_2,zipcode,city,region,country_name</code>.</li>
<li><code>origin_coordinates</code> - The order origin coordinates in the format <code>longitude,latitude</code>.</li>
<li><code>destination_address</code> - The order destination address in the same format as <code>origin_address</code>.</li>
<li><code>destination_coordinates</code> - The order destination coordinates in the same format as <code>origin_coordinates</code>.</li>
<li><code>starts_at</code> - The start date and time of the order.</li>
<li><code>stops_at</code> - The end date and time of the order.</li>
<li><code>products</code> - An array of products in the order, with the <code>id</code>, <code>title</code>, <code>price_in_cents</code> and <code>quantity</code> for each product.</li>
<li><code>token</code> - A JWT token that can be used to verify the request came from Booqable.</li>
</ul>
<div class="highlight"><pre class="highlight plaintext"><code>POST /api/v1/rates

distance=3.317
distance_unit=metric
order_amount_in_cents=60000
origin_address=Rua de Belem 84,,1300-085,Lisboa,Lisbon,Portugal
origin_coordinates=-9.20301506928,38.697395054265
destination_address=Av. Brasília,,1400-038,Lisboa,Lisbon,Portugal
destination_coordinates=-9.2057249,38.6937838
starts_at=2025-08-15T09:00:00Z
stops_at=2025-08-16T15:00:00Z
products[][id]=1938440d-49c2-499a-83f1-a276927d5d6c
products[][title]=Batavus male bike
products[][price_in_cents]=45000.0
products[][quantity]=1.0
products[][id]=c07d6a9e-1def-4933-bc2a-dfd663c09656
products[][title]=Bike helmet
products[][price_in_cents]=15000.0
products[][quantity]=1.0
token=&lt;JWT token&gt;
</code></pre></div>
<p>Your rates endpoint must respond within 3000ms or the request will be considered failed. The endpoint must return a 200 status code with a JSON response containing an array of rates in the following format:</p>
<div class="highlight"><pre class="highlight json-doc"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a6236947-a671-4d16-ae21-8efcc388994f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delivery_rates"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard Rate"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My rate description."</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flat"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"range"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50 km"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"minimum_order_amount_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"free_delivery_threshold_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"carrier_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eaccc770-dOda-4dla-8201-b596b79a2f97"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard Rate"</span><span class="p">,</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="c1">// ... other rates here ...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<ul>
<li><code>id</code> — Unique identifier for the rate, as an UUID.</li>
<li><code>type</code> — Fixed constant. Must be the string <code>&quot;delivery_rates&quot;</code>.</li>
<li><code>attributes.identifier</code> — Human readable identifier for the rate.</li>
<li><code>attributes.label</code> — Additional label for the rate.</li>
<li><code>attributes.description</code> — Extra context for the rate.</li>
<li><code>attributes.type</code> — Rate type, either <code>&quot;flat&quot;</code> or <code>&quot;calculated&quot;</code>.</li>
<li><code>attributes.range</code> — Delivery range.</li>
<li><code>attributes.price_in_cents</code> — Delivery cost in cents.</li>
<li><code>attributes.minimum_order_amount_in_cents</code> — Minimum order value required.</li>
<li><code>attributes.free_delivery_threshold_in_cents</code> — Threshold for free delivery.</li>
<li><code>attributes.carrier_id</code> — ID of the delivery carrier.</li>
</ul>

<p>If any other status code is returned or if the response does not follow the above format the request will be considered failed and no rates will be shown to users.</p>
<h2 id='capabilities-payment-options'>Payment Options</h2>
<p>This capability allows your app to add custom payment options for users during checkout.</p>
<h3 id='capabilities-payment-options-routes'>Routes</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"charge_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/paypal/charge"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cancel_charge_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/paypal/charge/:id/cancel"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"authorization_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/paypal/auth"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"capture_authorization_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/paypal/auth/:id/capture"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"void_authorization_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/paypal/auth/:id/void"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refund_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/paypal/refund"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Payment apps define their API routes in the <a href="#reference-routes"><code>routes</code> section of their <code>meta.json</code> file</a>. These routes tell Booqable where to send requests for different payment operations.</p>

<p>There are a total of 6 routes available:</p>

<ul>
<li><a href="#capabilities-payment-options-configuration-available-routes-charge_url"><code>charge_url</code></a></li>
<li><a href="#capabilities-payment-options-configuration-available-routes-cancel_charge_url"><code>cancel_charge_url</code></a></li>
<li><a href="#capabilities-payment-options-configuration-available-routes-authorization_url"><code>authorization_url</code></a></li>
<li><a href="#capabilities-payment-options-configuration-available-routes-capture_authorization_url"><code>capture_authorization_url</code></a></li>
<li><a href="#capabilities-payment-options-configuration-available-routes-void_authorization_url"><code>void_authorization_url</code></a></li>
<li><a href="#capabilities-payment-options-configuration-available-routes-refund_url"><code>refund_url</code></a></li>
</ul>
<h3 id='capabilities-payment-options-configuration'>Configuration</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://example.booqable.com/api/4/app_payment_options'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "data": {
      "type": "app_payment_options",
      "attributes": {}
    }
  }'</span>
</code></pre></div>
<p>After a user installs your payment app, you must create a PaymentOption record using Booqable&#39;s <a href="internal.html#app-payment-options">Payment Options API endpoint</a>. The PaymentOption enables Booqable to show new payment options in the UI using the <a href="#reference-routes">routes configured in your app&#39;s <code>meta.json</code> file</a>. Users can then select your payment method during checkout, and Booqable will make authenticated requests to your app&#39;s endpoints using JWT tokens for security.</p>

<p>You should create the PaymentOption right after the app exchanges the authorization code for an access token or when a user has provided all necessary settings for your app to function.</p>
<h4 id='capabilities-payment-options-configuration-available-routes'>Available Routes</h4><h5 id='capabilities-payment-options-configuration-available-routes-charge_url'><code>charge_url</code></h5><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// Example:</span><span class="w">
</span><span class="c1">// POST https://my-payments-app.com/charge</span><span class="w">
</span></code></pre></div>
<p>Process payment charges.</p>

<p>This route is called when a user initiates a payment during checkout. Booqable sends the payment details including the total amount, customer address, and a return URL where the user should be redirected after payment completion. Your app should respond with a unique charge ID and a redirect URL where the user can complete the payment.</p>
<h6 id='capabilities-payment-options-configuration-available-routes-code-charge_url-code-request-parameters'>Request Parameters</h6><div class="highlight"><pre class="highlight json-doc"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"booqable_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3f1c9e2-4b7d-4e8a-9c2b-1f5e6d7a8b9c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customer_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Main St, City, State, Country"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"return_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://booqable.com/example-end-of-payment-callback"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>booqable_id</code></td>
<td>The unique identifier of this charge in Booqable&#39;s system</td>
</tr>
<tr>
<td><code>customer_address</code></td>
<td>Customer&#39;s billing address for payment processing</td>
</tr>
<tr>
<td><code>total_in_cents</code></td>
<td>Total amount to charge in cents (e.g., 5000 = $50.00)</td>
</tr>
<tr>
<td><code>currency</code></td>
<td>Currency code for the payment (e.g., &quot;USD&quot;, &quot;EUR&quot;)</td>
</tr>
<tr>
<td><code>return_url</code></td>
<td>URL where the user should be redirected after payment completion</td>
</tr>
</tbody></table>
<h6 id='capabilities-payment-options-configuration-available-routes-code-charge_url-code-response-parameters'>Response Parameters</h6><div class="highlight"><pre class="highlight json-doc"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"charge_123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redirect_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://my-payments-app.com/redirect"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>Unique identifier for the charge, in your payment app&#39;s system</td>
</tr>
<tr>
<td><code>redirect_url</code></td>
<td>URL where the user should be redirected to, from Booqable, to complete the payment</td>
</tr>
</tbody></table>
<h5 id='capabilities-payment-options-configuration-available-routes-cancel_charge_url'><code>cancel_charge_url</code></h5><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// Example:</span><span class="w">
</span><span class="c1">// PUT https://my-payments-app.com/charge/charge_123/cancel</span><span class="w">
</span></code></pre></div>
<p>Cancel a payment charge.</p>

<p>This route is called when a payment needs to be cancelled, typically when an order is cancelled or when a shopping cart is invalidated. The charge ID from your app is passed in the URL path, and you should respond with a success status to confirm the cancellation.</p>
<h6 id='capabilities-payment-options-configuration-available-routes-code-cancel_charge_url-code-request-parameters'>Request Parameters</h6>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>:id</code> (URL path)</td>
<td>The charge ID, in your payment app&#39;s system, to cancel</td>
</tr>
</tbody></table>
<h6 id='capabilities-payment-options-configuration-available-routes-code-cancel_charge_url-code-response'>Response</h6>
<p>The response should be an HTTP 200 OK status.</p>
<h5 id='capabilities-payment-options-configuration-available-routes-authorization_url'><code>authorization_url</code></h5><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// Example:</span><span class="w">
</span><span class="c1">// POST https://my-payments-app.com/authorization</span><span class="w">
</span></code></pre></div>
<p>Create payment authorizations for deposit/capture flows.</p>

<p>This route is called when creating a payment authorization for later capture, typically used for deposit and hold scenarios where funds are authorized but not immediately charged. The response should include an authorization ID and redirect URL for the user to complete the authorization process.</p>
<h6 id='capabilities-payment-options-configuration-available-routes-code-authorization_url-code-request-parameters'>Request Parameters</h6><div class="highlight"><pre class="highlight json-doc"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"booqable_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3f1c9e2-4b7d-4e8a-9c2b-1f5e6d7a8b9c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customer_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Main St, City, State"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"return_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://booqable.com/example-end-of-authorization-callback"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>booqable_id</code></td>
<td>The unique identifier of this authorization in Booqable&#39;s system</td>
</tr>
<tr>
<td><code>customer_address</code></td>
<td>Customer&#39;s billing address for payment processing</td>
</tr>
<tr>
<td><code>total_in_cents</code></td>
<td>Total amount to authorize in cents (e.g., 5000 = $50.00)</td>
</tr>
<tr>
<td><code>currency</code></td>
<td>Currency code for the authorization (e.g., &quot;USD&quot;, &quot;EUR&quot;)</td>
</tr>
<tr>
<td><code>return_url</code></td>
<td>URL where the user should be redirected after authorization completion</td>
</tr>
</tbody></table>
<h6 id='capabilities-payment-options-configuration-available-routes-code-authorization_url-code-response-parameters'>Response Parameters</h6><div class="highlight"><pre class="highlight json-doc"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authorization_123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redirect_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://my-payments-app.com/redirect"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>Unique identifier for the authorization in your payment app&#39;s system</td>
</tr>
<tr>
<td><code>redirect_url</code></td>
<td>URL where the user should be redirected to, from Booqable, to complete the authorization</td>
</tr>
</tbody></table>
<h5 id='capabilities-payment-options-configuration-available-routes-capture_authorization_url'><code>capture_authorization_url</code></h5><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// Example:</span><span class="w">
</span><span class="c1">// PUT https://my-payments-app.com/authorization/authorization_123/capture</span><span class="w">
</span></code></pre></div>
<p>Capture funds from a previous authorization.</p>

<p>This route is called when capturing previously authorized funds, completing the deposit and hold flow. The authorization ID from your app is passed in the URL path, and the request body contains the final amount to capture along with the Booqable charge ID.</p>
<h6 id='capabilities-payment-options-configuration-available-routes-code-capture_authorization_url-code-request-parameters'>Request Parameters</h6><div class="highlight"><pre class="highlight json-doc"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"total_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"booqable_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3f1c9e2-4b7d-4e8a-9c2b-1f5e6d7a8b9c"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>total_in_cents</code></td>
<td>Final amount to capture in cents (e.g., 5000 = $50.00)</td>
</tr>
<tr>
<td><code>booqable_id</code></td>
<td>The unique identifier of this charge in Booqable&#39;s system</td>
</tr>
</tbody></table>
<h6 id='capabilities-payment-options-configuration-available-routes-code-capture_authorization_url-code-response'>Response</h6>
<p>The response should be an HTTP 200 OK status.</p>
<h5 id='capabilities-payment-options-configuration-available-routes-void_authorization_url'><code>void_authorization_url</code></h5><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// Example:</span><span class="w">
</span><span class="c1">// PUT https://my-payments-app.com/authorization/authorization_123/void</span><span class="w">
</span></code></pre></div>
<p>Void/cancel a payment authorization.</p>

<p>This route is called when cancelling an unused authorization, typically when an order is cancelled before the authorization is captured or when the authorization expires. The authorization ID from your app is passed in the URL path, and you should respond with a success status to confirm the void operation.</p>
<h6 id='capabilities-payment-options-configuration-available-routes-code-void_authorization_url-code-request-parameters'>Request Parameters</h6>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>:id</code> (URL path)</td>
<td>The authorization ID, in your payment app&#39;s system, to void</td>
</tr>
</tbody></table>
<h6 id='capabilities-payment-options-configuration-available-routes-code-void_authorization_url-code-response'>Response</h6>
<p>The response should be an HTTP 200 OK status.</p>
<h5 id='capabilities-payment-options-configuration-available-routes-refund_url'><code>refund_url</code></h5><div class="highlight"><pre class="highlight json-doc"><code><span class="c1">// Example:</span><span class="w">
</span><span class="c1">// POST https://my-payments-app.com/refund</span><span class="w">
</span></code></pre></div>
<p>Process payment refunds.</p>

<p>This route is called when processing a refund for a completed payment. Booqable sends the refund details including the original charge ID, refund amount, and currency. Your app should respond with a unique refund ID to track the refund operation.</p>
<h6 id='capabilities-payment-options-configuration-available-routes-code-refund_url-code-request-parameters'>Request Parameters</h6><div class="highlight"><pre class="highlight json-doc"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"booqable_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a3f1c9e2-4b7d-4e8a-9c2b-1f5e6d7a8b9c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"charge_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original_charge_id"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total_in_cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>booqable_id</code></td>
<td>The unique identifier of this refund in Booqable&#39;s system</td>
</tr>
<tr>
<td><code>charge_id</code></td>
<td>ID of the original charge being refunded</td>
</tr>
<tr>
<td><code>total_in_cents</code></td>
<td>Refund amount in cents (e.g., 5000 = $50.00)</td>
</tr>
<tr>
<td><code>currency</code></td>
<td>Currency code for the refund (e.g., &quot;USD&quot;, &quot;EUR&quot;)</td>
</tr>
</tbody></table>
<h6 id='capabilities-payment-options-configuration-available-routes-code-refund_url-code-response-parameters'>Response Parameters</h6><div class="highlight"><pre class="highlight json-doc"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refund_123"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>Unique identifier for the refund, in your payment app&#39;s system</td>
</tr>
</tbody></table>
<h1 id='reference'>Reference</h1><h2 id='reference-config-meta-json'><code>/config/meta.json</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://developers.booqable.com/schemas/app-0-1-0.json#"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"acme_app"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACME App"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tracking"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACME Corp."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"icon"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/app-icon.png"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/app-image.png"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cookies_required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"support"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">SupportData</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"pay_button"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/pay-button.png"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base_url"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">BaseURL</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"oauth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">OAuthSettings</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"config_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/settings/integrations"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"routes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">Routes</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"ui_extension"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">UIExtensions</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"global_settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>$schema</code></td>
<td>string</td>
<td>true</td>
<td>Schema version for the app configuration.</td>
</tr>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>true</td>
<td>Unique identifier for the app, used internally.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>true</td>
<td>Display name of the app as shown to users.</td>
</tr>
<tr>
<td><code>category</code></td>
<td>one of: <code>tracking</code>, <code>payment</code>, <code>translation</code>, <code>maps</code>, <code>marketing</code>, <code>social</code></td>
<td>true</td>
<td>Category classification for organizing apps in the app store.</td>
</tr>
<tr>
<td><code>author</code></td>
<td>string</td>
<td>true</td>
<td>Name of the app developer or company.</td>
</tr>
<tr>
<td><code>version</code></td>
<td>string</td>
<td>true</td>
<td>Version number or status of the app.</td>
</tr>
<tr>
<td><code>icon</code></td>
<td>string</td>
<td>true</td>
<td>URL or path to the app&#39;s icon/logo image.</td>
</tr>
<tr>
<td><code>image</code></td>
<td>string</td>
<td>true</td>
<td>URL or path to the app&#39;s cover/feature image displayed in the app store.</td>
</tr>
<tr>
<td><code>cookies_required</code></td>
<td>boolean</td>
<td>false</td>
<td>Whether the app installs cookies in the user&#39;s browser.</td>
</tr>
<tr>
<td><code>support</code></td>
<td><a href="#reference-supportdata"><code>SupportData</code></a></td>
<td>false</td>
<td></td>
</tr>
<tr>
<td><code>pay_button</code></td>
<td>string</td>
<td>false</td>
<td>URL or path to a custom payment button image (used by payment apps).</td>
</tr>
<tr>
<td><code>base_url</code></td>
<td><a href="#reference-baseurl"><code>BaseURL</code></a></td>
<td>false</td>
<td></td>
</tr>
<tr>
<td><code>oauth</code></td>
<td><a href="#reference-oauthsettings"><code>OAuthSettings</code></a></td>
<td>false</td>
<td></td>
</tr>
<tr>
<td><code>config_url</code></td>
<td>string</td>
<td>false</td>
<td>URL path for the app&#39;s configuration/settings page.</td>
</tr>
<tr>
<td><code>routes</code></td>
<td><a href="#reference-routes"><code>Routes</code></a></td>
<td>false</td>
<td></td>
</tr>
<tr>
<td><code>ui_extension</code></td>
<td><a href="#reference-uiextensions"><code>UIExtensions</code></a></td>
<td>false</td>
<td></td>
</tr>
<tr>
<td><code>global_settings</code></td>
<td>object</td>
<td>false</td>
<td>Global, user-configurable settings for the app.</td>
</tr>
</tbody></table>
<h2 id='reference-supportdata'><code>SupportData</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"support@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"website"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://help.example.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>true</td>
<td>Support email address for the app.</td>
</tr>
<tr>
<td><code>website</code></td>
<td>string</td>
<td>true</td>
<td>Support website or documentation URL.</td>
</tr>
</tbody></table>
<h2 id='reference-baseurl'><code>BaseURL</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"development"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:3000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"staging"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://staging-api.example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"production"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>development</code></td>
<td>string</td>
<td>false</td>
<td>URL for development environment.</td>
</tr>
<tr>
<td><code>staging</code></td>
<td>string</td>
<td>false</td>
<td>URL for staging environment.</td>
</tr>
<tr>
<td><code>production</code></td>
<td>string</td>
<td>false</td>
<td>URL for production environment.</td>
</tr>
</tbody></table>
<h2 id='reference-oauthsettings'><code>OAuthSettings</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789.apps.googleusercontent.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secret456abc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redirect_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.example.com/oauth/callback"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>client_id</code></td>
<td>string</td>
<td>false</td>
<td>OAuth client ID for the third-party service.</td>
</tr>
<tr>
<td><code>client_secret</code></td>
<td>string</td>
<td>false</td>
<td>OAuth client secret for the third-party service.</td>
</tr>
<tr>
<td><code>redirect_url</code></td>
<td>string</td>
<td>true</td>
<td>OAuth redirect URL for handling authentication callbacks.</td>
</tr>
<tr>
<td><code>scopes</code></td>
<td>array of string</td>
<td>true</td>
<td>OAuth scopes required by the app.</td>
</tr>
</tbody></table>
<h2 id='reference-routes'><code>Routes</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"charge_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com/charge"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"authorization_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com/auth"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refund_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com/refund"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payment_profile_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com/profile"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"install_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.example.com/install"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>charge_url</code></td>
<td>string</td>
<td>false</td>
<td>URL endpoint for processing charges.</td>
</tr>
<tr>
<td><code>authorization_url</code></td>
<td>string</td>
<td>false</td>
<td>URL endpoint for payment authorization.</td>
</tr>
<tr>
<td><code>refund_url</code></td>
<td>string</td>
<td>false</td>
<td>URL endpoint for processing refunds.</td>
</tr>
<tr>
<td><code>payment_profile_url</code></td>
<td>string</td>
<td>false</td>
<td>URL endpoint for payment profile management.</td>
</tr>
<tr>
<td><code>install_url</code></td>
<td>string</td>
<td>false</td>
<td>URL endpoint for app installation.</td>
</tr>
</tbody></table>
<h2 id='reference-uiextensions'><code>UIExtensions</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"frames"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">FrameSettings</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"themes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">ThemeSettings</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"tracking_script"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">TrackingScriptSettings</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>frames</code></td>
<td><a href="#reference-framesettings"><code>FrameSettings</code></a></td>
<td>false</td>
<td></td>
</tr>
<tr>
<td><code>themes</code></td>
<td><a href="#reference-themesettings"><code>ThemeSettings</code></a></td>
<td>false</td>
<td></td>
</tr>
<tr>
<td><code>tracking_script</code></td>
<td><a href="#reference-trackingscriptsettings"><code>TrackingScriptSettings</code></a></td>
<td>false</td>
<td></td>
</tr>
</tbody></table>
<h2 id='reference-framesettings'><code>FrameSettings</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"app_config"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/admin/apps/my-app/config"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>app_config</code></td>
<td>string</td>
<td>false</td>
<td>URL path for the app configuration iframe.</td>
</tr>
</tbody></table>
<h2 id='reference-trackingscriptsettings'><code>TrackingScriptSettings</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"templates/index.js.liquid"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>template</code></td>
<td>string</td>
<td>true</td>
<td>Path to the JavaScript template file for the tracking script.</td>
</tr>
</tbody></table>
<h2 id='reference-themesettings'><code>ThemeSettings</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"blocks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>blocks</code></td>
<td>array of <a href="#themeblocksettings"><code>ThemeBlockSettings</code></a></td>
<td>false</td>
<td>Array of theme blocks that can be added to the store.</td>
</tr>
</tbody></table>
<h2 id='reference-themeblocksettings'><code>ThemeBlockSettings</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Signup Form"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"templates/signup-form.liquid"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"allowed_sections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>true</td>
<td>Display name of the theme block.</td>
</tr>
<tr>
<td><code>template</code></td>
<td>string</td>
<td>true</td>
<td>Path to the Liquid template file for the block.</td>
</tr>
<tr>
<td><code>allowed_sections</code></td>
<td>array of string</td>
<td>true</td>
<td>List of sections where the block can be placed.</td>
</tr>
<tr>
<td><code>settings</code></td>
<td>object</td>
<td>false</td>
<td>Configuration settings for the theme block.</td>
</tr>
</tbody></table>
<h2 id='reference-globalsetting'><code>GlobalSetting</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Default Title"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pattern"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*</span><span class="se">\.</span><span class="s2">mydomain</span><span class="se">\.</span><span class="s2">com/.*"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td>one of: <code>text</code>, <code>number</code>, <code>textarea</code>, <code>select</code>, <code>header</code></td>
<td>true</td>
<td>Type of the setting field.</td>
</tr>
<tr>
<td><code>required</code></td>
<td>boolean</td>
<td>false</td>
<td>Whether this setting is required for the app to function.</td>
</tr>
<tr>
<td><code>default</code></td>
<td></td>
<td>false</td>
<td>Default value for the setting.</td>
</tr>
<tr>
<td><code>pattern</code></td>
<td>string</td>
<td>false</td>
<td>Regex pattern for validation of text/textarea fields.</td>
</tr>
<tr>
<td><code>options</code></td>
<td>array of <a href="#selectoption"><code>SelectOption</code></a></td>
<td>false</td>
<td>Options for select type settings.</td>
</tr>
</tbody></table>
<h2 id='reference-themeblocksetting'><code>ThemeBlockSetting</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter title here"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Default Title"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mobile Settings"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="err">/*</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td>one of: <code>text</code>, <code>number</code>, <code>select</code>, <code>header</code></td>
<td>true</td>
<td>Type of the setting field.</td>
</tr>
<tr>
<td><code>label</code></td>
<td>string</td>
<td>false</td>
<td>Display label for the setting.</td>
</tr>
<tr>
<td><code>placeholder</code></td>
<td>string</td>
<td>false</td>
<td>Placeholder text for text inputs.</td>
</tr>
<tr>
<td><code>default</code></td>
<td>string</td>
<td>false</td>
<td>Default value for the setting.</td>
</tr>
<tr>
<td><code>content</code></td>
<td>string</td>
<td>false</td>
<td>Content for header type settings.</td>
</tr>
<tr>
<td><code>options</code></td>
<td>array of <a href="#selectoption"><code>SelectOption</code></a></td>
<td>false</td>
<td>Options for select type settings.</td>
</tr>
</tbody></table>
<h2 id='reference-selectoption'><code>SelectOption</code></h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"left"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Left"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>value</code></td>
<td>string</td>
<td>true</td>
<td>Value of the option.</td>
</tr>
<tr>
<td><code>label</code></td>
<td>string</td>
<td>true</td>
<td>Display label for the option.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
